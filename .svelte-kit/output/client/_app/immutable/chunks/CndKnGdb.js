import{ae as c,af as o,t as b,B as h,ag as m,ah as y,ai as k,aj as S,ak as q,h as w,x as f,al as g}from"./DJFIOxsX.js";function _(e,a,n=!1){if(e.multiple){if(a==null)return;if(!h(a))return m();for(var u of e.options)u.selected=a.includes(i(u));return}for(u of e.options){var r=i(u);if(y(r,a)){u.selected=!0;return}}(!n||a!==void 0)&&(e.selectedIndex=-1)}function x(e){var a=new MutationObserver(()=>{_(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),b(()=>{a.disconnect()})}function M(e,a,n=a){var u=!0;c(e,"change",r=>{var l=r?"[selected]":":checked",t;if(e.multiple)t=[].map.call(e.querySelectorAll(l),i);else{var v=e.querySelector(l)??e.querySelector("option:not([disabled])");t=v&&i(v)}n(t)}),o(()=>{var r=a();if(_(e,r,u),u&&r===void 0){var l=e.querySelector(":checked");l!==null&&(r=i(l),n(r))}e.__value=r,u=!1}),x(e)}function i(e){return"__value"in e?e.__value:e.value}function V(e,a,n=a){var u=new WeakSet;c(e,"input",async r=>{var l=r?e.defaultValue:e.value;if(l=s(e)?d(l):l,n(l),f!==null&&u.add(f),await k(),l!==(l=a())){var t=e.selectionStart,v=e.selectionEnd;e.value=l??"",v!==null&&(e.selectionStart=t,e.selectionEnd=Math.min(v,e.value.length))}}),(w&&e.defaultValue!==e.value||S(a)==null&&e.value)&&(n(s(e)?d(e.value):e.value),f!==null&&u.add(f)),q(()=>{var r=a();if(e===document.activeElement){var l=g??f;if(u.has(l))return}s(e)&&r===d(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function s(e){var a=e.type;return a==="number"||a==="range"}function d(e){return e===""?null:+e}export{M as a,V as b};
